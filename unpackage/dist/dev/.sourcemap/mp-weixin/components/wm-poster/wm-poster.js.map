{"version":3,"sources":["webpack:///D:/小程序/detion/components/wm-poster/wm-poster.vue?755a","webpack:///D:/小程序/detion/components/wm-poster/wm-poster.vue?bc8c","webpack:///D:/小程序/detion/components/wm-poster/wm-poster.vue?a82b","webpack:///D:/小程序/detion/components/wm-poster/wm-poster.vue?257c","webpack:///D:/小程序/detion/components/wm-poster/wm-poster.vue"],"names":["_this","name","props","CanvasID","Type","String","default","imgSrc","QrSrc","Title","TitleColor","LineType","Boolean","PriceTxt","PriceColor","OriginalTxt","OriginalColor","Width","CanvasBg","Referrer","ViewDetails","data","canvasW","canvasH","canvasImgSrc","ctx","methods","OnCanvas","uni","createCanvasContext","C_W","upx2px","C_P","C_Q","_strlineW","getImageInfo","_imgInfo","_QrCode","r","width","height","q","imgW","Math","floor","setFillStyle","fillRect","drawImage","path","setFontSize","_strLastIndex","_strHeight","_num","i","length","measureText","fillText","substring","strokeStyle","moveTo","lineTo","stroke","setTimeout","draw","ret","getNewImage","Promise","resolve","errs","src","success","image","fail","err","canvasToTempFilePath","canvasId","quality","complete","res","console","log","tempFilePath","$emit","mounted"],"mappings":"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","file":"components/wm-poster/wm-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wm-poster.vue?vue&type=template&id=025ff6da&\"\nvar renderjs\nimport script from \"./wm-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./wm-poster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"D:/小程序/detion/components/wm-poster/wm-poster.vue\"\nexport default component.exports","export * from \"-!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=template&id=025ff6da&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\uniapp-hbuilder\\\\HBuilderX.2.3.3.20190923.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wm-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n\n\tvar _this;\nexport default {\n\tname: 'wm-poster',\n\tprops: {\n\t\tCanvasID:{\t\t//CanvasID 等同于 canvas-id\n\t\t\tType:String,\n\t\t\tdefault:'PosterCanvas'\n\t\t},\n\t\timgSrc:{\t\t//展示图\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tQrSrc:{\t\t\t//二维码\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitle:{\t\t\t//文本内容\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tTitleColor:{\t//标题颜色\n\t\t\tType:String,\n\t\t\tdefault:'#333333'\n\t\t},\n\t\tLineType:{\t\t//标题显示行数\t\t（注超出2行显示会导致画布布局絮乱）\n\t\t\tType:[String,Boolean],\n\t\t\tdefault:true\n\t\t},\n\t\tPriceTxt:{\t\t//价格值\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tPriceColor:{\t//价格颜色\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tOriginalTxt:{\t//原价值\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tOriginalColor:{\t//默认颜色（如原价与扫描二维码颜色）\n\t\t\tType:String,\n\t\t\tdefault:'#b8b8b8'\n\t\t},\n\t\tWidth:{\t\t\t//画布宽度  (高度根据图片比例计算 单位upx)\n\t\t\tType:String,\n\t\t\tdefault:750\n\t\t},\n\t\tCanvasBg:{\t\t//canvas画布背景色\n\t\t\tType:String,\t\t\n\t\t\tdefault:'#ffffff'\n\t\t},\n\t\tReferrer:{\t\t//推荐人信息\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t},\n\t\tViewDetails:{\t//描述提示文字\n\t\t\tType:String,\n\t\t\tdefault:''\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW:0,\n\t\t\tcanvasH: 0,\n\t\t\tcanvasImgSrc:'',\n\t\t\tctx:null\n\t\t};\n\t},\n\tmethods: {\n\t\tasync OnCanvas() {\n\t\t\t_this.ctx = uni.createCanvasContext(_this.CanvasID,this);\n\t\t\tconst C_W = uni.upx2px(_this.Width), //canvas宽度\n\t\t\t\tC_P = uni.upx2px(0), //canvas Paddng 间距\n\t\t\t\tC_Q = uni.upx2px(250); //二维码或太阳码宽高\n\t\t\tlet _strlineW = 0; //文本宽度\n\t\t\tlet _imgInfo = await _this.getImageInfo({ imgSrc: _this.imgSrc }); //广告图\n\t\t\tlet _QrCode = await _this.getImageInfo({ imgSrc: _this.QrSrc }); //二维码或太阳码\n\t\t\tlet r = [_imgInfo.width, _imgInfo.height];\n\t\t\tlet q = [_QrCode.width, _QrCode.height];\n\t\t\tlet imgW = C_W - C_P * 2;\n\t\t\tif (r[0] != imgW) {\n\t\t\t\tr[1] = Math.floor((imgW / r[0]) * r[1]);\n\t\t\t\tr[0] = imgW;\n\t\t\t}\n\t\t\tif (q[0] != C_Q) {\n\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\n\t\t\t\tq[0] = C_Q;\n\t\t\t}\n\t\t\t_this.canvasW = C_W;\n\t\t\t// _this.canvasH = r[1] + q[1] + 128;\n\t\t\t_this.canvasH = r[1];\n\t\t\t_this.ctx.setFillStyle(_this.CanvasBg); //canvas背景颜色\n\t\t\t_this.ctx.fillRect(0, 0, C_W, _this.canvasH); //canvas画布大小\n\t\t\t\n\t\t\t//添加图片展示\n\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, C_P, r[0], r[1]);\n\t\t\t//添加图片展示 end\n\n\t\t\t//设置文本\n\t\t\t_this.ctx.setFontSize(uni.upx2px(48)); //设置标题字体大小\n\t\t\t_this.ctx.setFillStyle(_this.TitleColor); //设置标题文本颜色\n\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\tlet _strHeight = r[1] + C_P * 2 - 240; //绘制字体距离canvas顶部的初始高度\n\t\t\tlet _num=1;\n\t\t\tfor (let i = 0; i < _this.Title.length; i++) {\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.Title[i]).width;\n\t\t\t\tif (_strlineW > r[0]) {\n\t\t\t\t\tif(_num == 2&&_this.LineType){\n\t\t\t\t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i-8)+'...', C_P, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_P, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strHeight += 20;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t}\n\t\t\t\t}else if (i == _this.Title.length - 1) {\n\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_P, _strHeight);\n\t\t\t\t\t_strlineW = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//设置文本 end\n\n\t\t\t//设置价格\n\t\t\t_strlineW = C_P;\n\t\t\t_strHeight += uni.upx2px(60);\n\t\t\tif(_num==1){\n\t\t\t\t_strHeight += 20;\t//单行标题时占位符\n\t\t\t}\n\t\t\t\n\t\t\tif(_this.PriceTxt !=''){\t//判断是否有销售价格\n\t\t\t\t_this.ctx.setFillStyle(_this.PriceColor);\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(38));\n\t\t\t\t_this.ctx.fillText(_this.PriceTxt, _strlineW, _strHeight); //商品价格\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.PriceTxt).width + uni.upx2px(10);\n\t\t\t}\n\t\t\tif(_this.PriceTxt !='' && _this.OriginalTxt !=''){\t//判断是否有销售价格且原价\n\t\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t\t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t\t_this.ctx.fillText(_this.OriginalTxt, _strlineW, _strHeight); //商品原价\n\t\t\t}\n\t\t\t_this.ctx.strokeStyle = _this.OriginalColor;\n\t\t\t_this.ctx.moveTo(_strlineW, _strHeight - uni.upx2px(10)); //起点\n\t\t\t_this.ctx.lineTo(_strlineW + _this.ctx.measureText(_this.OriginalTxt).width, _strHeight - uni.upx2px(10)); //终点\n\t\t\t_this.ctx.stroke();\n\t\t\t//设置价格 end\n\n\t\t\t//添加二维码\n\t\t\t_strHeight += uni.upx2px(-480); //二维码位置\n\t\t\t_this.ctx.drawImage(_QrCode.path, uni.upx2px(260), _strHeight, q[0], q[1]);\n\t\t\t//添加二维码 end\n\n\t\t\t//添加推荐人与描述\n\t\t\t_this.ctx.setFillStyle(_this.TitleColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(60));\n\t\t\t_this.ctx.fillText(_this.Referrer, uni.upx2px(290), _strHeight + q[1] / 2 + uni.upx2px(220));\n\t\t\t_this.ctx.setFillStyle(_this.OriginalColor);\n\t\t\t_this.ctx.setFontSize(uni.upx2px(24));\n\t\t\t_this.ctx.fillText(_this.ViewDetails, C_P, _strHeight + q[1] / 2 + 20);\n\t\t\t//添加推荐人与描述 end\n\t\t\t\n\t\t\t//延迟后渲染至canvas上\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.ctx.draw(true,(ret)=>{\n\t\t\t\t\t_this.getNewImage();\n\t\t\t\t});\n\t\t\t}, 600);\n\t\t},\n\t\tasync getImageInfo({ imgSrc }) {\n\t\t\treturn new Promise((resolve, errs) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\terrs(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetNewImage(){\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: _this.CanvasID,\n\t\t\t\tquality: 1,\n\t\t\t\tcomplete: (res) => {\n\t\t\t\t\tconsole.log(res.tempFilePath);\n\t\t\t\t\t_this.$emit('success',res);\n\t\t\t\t}\n\t\t\t},this);\n\t\t}\n\t\t\n\t},\n\tmounted() {\n\t\t_this = this;\n\t\t_this.OnCanvas();\n\t}\n};\n"],"sourceRoot":""}